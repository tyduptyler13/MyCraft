function q(c){var k=[],g=[],d=[],e=[],f=[];c.forEach(function(b){var c=b.b+b.x,a=b.c+b.y,m=b.a+b.z,h=b.x,n=b.y,p=b.z,r=k.length;k.push(c,a,m,c,a,p,c,n,m,c,n,p,h,a,p,h,a,m,h,n,p,h,n,m);d=d.concat([0,2,1,2,3,1,4,6,5,6,7,5,4,5,1,5,0,1,7,6,2,6,3,2,5,7,0,7,2,0,1,3,4,3,6,4].map(function(a){return a+r}));e=e.concat([[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].reduce(function(a,b){for(var c=0;6>c;++c)a=a.concat(b);return a},[]));c=1*b.a;a=[];a.push(0,1*b.b,0,0,c,c,0,0,1*b.c,0,c,c);f=f.concat(a,a,
a,a,a,a);g.push(b.type)});c={position:Float32Array.f(k).buffer,h:Uint8Array.f(g).buffer,g:Uint16Array.f(d).buffer,i:Float32Array.f(e).buffer,j:Float32Array.f(f).buffer};self.postMessage(c,[c.position,c.h,c.g,c.i,c.j])}
self.addEventListener("message",function(c){c=new Int8Array(c.data);for(var k=[],g=[],d=null,e=0,f=0;512>f;++f){var b=f%8;c[f]!==d&&(0!==b&&g.push({type:d,x:e,y:null,z:null,b:b-e,c:null,a:null}),e=b,d=c[f]);7===b&&(g.push({type:d,x:e,y:null,z:null,b:b-e+1,c:null,a:null}),k.push(g),g=[],d=null,e=0)}c=[];g=[];d=null;for(e=0;64>e;++e){f=e%8;if(0!==f)for(var l=b=0;l<k[e].length;++l)for(var a=k[e][l],m=b;m<d.length;++m){var h=d[m];if(a.x<h.x){a.z=f;a.a=1;g.push(a);break}else a.x>h.x?b=m:a.x===h.x&&a.b===
h.b&&(null!==h.z?h.a++:(h.z=f-1,h.a=2,g.push(h)),k[e][l]=h)}7===f?(d=null,c.push(g),g=[]):d=k[e]}k=[];g=null;for(d=0;8>d;++d){if(0!==d)for(f=e=0;f<c[d].length;++f)for(b=c[d][f],l=e;l<g.length;++l)if(a=g[l],b.x<a.x&&b.z<a.z){b.y=d;b.c=1;k.push(b);break}else b.x>a.x&&b.z>a.z?e=l:b.x===a.x&&b.b===a.b&&b.z===a.z&&b.a===a.a&&(null!==a.y?a.c++:(a.y=d-1,a.c=2,k.push(a)),c[d][f]=a);g=c[d]}q(k)});